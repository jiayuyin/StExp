ref:

https://blog.csdn.net/GMLGDJ/article/details/124627224

每个进程的用户地址空间都是独立的，一般而言是不能互相访问的，但内核空间是每个进程都共享的， 所以进程之间要通信必须通过内核。

进程间通信目的一般有共享数据，数据传输，消息通知，进程控制等。以 Unix/Linux为例，介绍几种重要的进程间通信方式：管道、消息队列、共享内存、信号量、信号、Socket。

### 管道

是把一个程序的输出直接连接到另一个程序的输入

匿名管道：|

有名管道：mkfifo

效率低下，不适合进程间频繁交换数据，好处是简单。

### 消息队列

消息队列是保存在内核中的消息链表

缺点：消息队列通信过程中，存在用户态与内核态之间的数据拷贝开销

### 共享内存

将不同进程的需要共享的一段虚拟内存映射到同一块物理内存上。

### 信号量

在共享内存的基础上，当多个进程向同一个共享内存中写入数据时可能会产生覆盖，如果只读则没有任何问题。

为了防止多进程竞争共享资源，而造成的数据错乱，所以需要保护机制，使得共享的资源，在任意时刻只能被一个进程访问。正好，信号量就实现了这一保护机制。

PV操作，原子操作（原子操作是指不会被线程调度机制打断的操作）：  

信号量表示资源的数量

1. P操作，这个操作会把信号量减去1，相减后如果信号量<0，则表明资源已被占用，进程需阻塞等待；相减后如果信号量>=0，则表明还有资源可使用，进程可正常继续执行。
2. V操作，这个操作会把信号量加上1，相加后如果信号量<=0，则表明当前有阻塞中的进程，于是会将该进程唤醒运行；相加后如果信号量>0，则表明当前没有阻塞中的进程。


**P操作是用在进入共享资源之前，V操作是用在离开共享资源之后，这两个操作是必须成对出现的**

信号初始化为1，就代表着是互斥信号量，它可以保证共享内存在任何时刻只有一个进程在访问

信号初始化为0，就代表着是同步信号量，它可以保证进程A应在进程B之前执行

### 信号

kill -l 可以查看信号列表

Ctrl + C , Ctrl + Z等信号，或者kill

信号事件的来源主要有硬件来源(如键盘Cltr+C)和软件来源(如kill命令)

**信号是进程间通信机制中唯一的异步通信机制**

进程需要为信号设置相应的监听处理，当收到特定信号时，执行相应的操作，类似很多编程语言里的通知机制。

### socket

Socket通信不仅可以跨网络与不同主机的进程间通信，还可以在同主机上进程间通信